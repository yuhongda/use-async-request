(function(s,n){typeof exports=="object"&&typeof module!="undefined"?n(exports,require("react")):typeof define=="function"&&define.amd?define(["exports","react"],n):(s=typeof globalThis!="undefined"?globalThis:s||self,n(s["use-request"]={},s.react))})(this,function(s,n){"use strict";var v=Object.defineProperty,P=Object.defineProperties,b=Object.getOwnPropertyDescriptors,i=Object.getOwnPropertySymbols,R=Object.prototype.hasOwnProperty,E=Object.prototype.propertyIsEnumerable,d=(r,e,t)=>e in r?v(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,l=(r,e)=>{for(var t in e||(e={}))R.call(e,t)&&d(r,t,e[t]);if(i)for(var t of i(e))E.call(e,t)&&d(r,t,e[t]);return r},c=(r,e)=>P(r,b(e));const h={data:null,loading:!1,error:null},m=r=>r==null?void 0:r.data,p=r=>{const{defaultData:e,requestFunction:t,payload:_,transformFunction:y,axiosCancelTokenSource:O}=r,[g,o]=n.useReducer((a,u)=>{switch(u.type){case"FETCH":return c(l({},a),{loading:!0,error:null});case"SUCCESS":return c(l({},a),{data:u.data,loading:!1,error:null});case"ERROR":return c(l({},a),{loading:!1,error:u.error});default:return a}},Object.assign({},h,{data:e})),C=n.useCallback(()=>t(_),[_]),f=n.useCallback(async()=>{try{const a=await C();let u=null;return y?u=y(a):u=m(a),o({type:"SUCCESS",data:u}),u}catch(a){return o({type:"ERROR",error:a}),null}},[C]);n.useEffect(()=>(o({type:"FETCH"}),f(),()=>{O&&O.cancel("[use-request] Cancel Request")}),[f]);const w=n.useCallback(()=>f(),[f]),q=n.useCallback(()=>{o({type:"RESET"})},[o]);return c(l({},g),{refetch:w,reset:q})};var S={useRequest:p};s.default=S,s.useRequest=p,Object.defineProperty(s,"__esModule",{value:!0})});
